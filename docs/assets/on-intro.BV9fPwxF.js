import{_ as V}from"./ApiDoc.vue.BBsrfSvH.js";import{E as U}from"./index.CqeEYO5W.js";import{_ as J}from"./arrow-right.D0V4y3zK.js";import{A as T,g as R,r as u,i as K,I as X,o as d,j as B,u as h,c as v,a as x,q as Y,t as G,w as C,b as f,s as _,l as Q,J as Z,K as P,x as O,H as I,L as tt,k as D,d as S,F as et,M as ot}from"./entry._doioHTx.js";import{I as st}from"./close.CEqdIK7P.js";import{u as nt}from"./vue.f36acd1f.BVcziSBg.js";const it="OnIntro",at="default",ct="on-intro",pt="",lt={},rt=[{name:"title",description:"Содержимое поля ввода",required:!1,type:{name:"union",elements:[{name:"string"},{name:"null"}]},defaultValue:{func:!1,value:"null"}}],ut=[{name:"default",scoped:!0,bindings:[{name:"text",title:"binding"}]}],ht="components/on-intro/index.vue",dt={name:it,exportName:at,displayName:ct,description:pt,tags:lt,props:rt,slots:ut,sourceFile:ht},y=30;let z=500;const E=991;class s{static show(t,n,e){if(this.getFullPageSize().width<=E){const o=s.positionOnMidCenter(t,e);return o.style.width=`${this.getSize(t).width-20}px`,o}switch(n){case"left":case"left-top":return s.positionOnLeft(t,e);case"left-center":return s.positionOnLeftCenter(t,e);case"left-bottom":return s.positionOnLeftBottom(t,e);case"right":case"right-top":return s.positionOnRight(t,e);case"right-center":return s.positionOnRightCenter(t,e);case"right-bottom":return s.positionOnRightBottom(t,e);case"top":case"top-left":return s.positionOnTop(t,e);case"top-center":case"top-right":return s.positionOnTopRight(t,e);case"bottom":case"bottom-left":return s.positionOnBottom(t,e);case"bottom-center":return s.positionOnBottomCenter(t,e);case"bottom-right":return s.positionOnBottomRight(t,e);case"mid-center":return s.positionOnMidCenter(t,e);case"auto":default:return s.autoPosition(t,e)}}static getFullPageSize(){return{height:Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),width:Math.max(document.body.scrollWidth,document.body.offsetWidth,document.documentElement.scrollWidth,document.documentElement.offsetWidth)}}static getCalculatedPosition(t){const n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,e=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,o=t.getBoundingClientRect();return{top:o.top+n,left:o.left+e,right:o.left+e+o.width,bottom:o.top+n+o.height}}static getSize(t){return{height:Math.max(t.scrollHeight,t.offsetHeight),width:Math.max(t.scrollWidth,t.offsetWidth)}}static checkWidth(t,n=!1){const e=s.getFullPageSize().width;if(e>E){const{left:o,right:c}=s.getCalculatedPosition(t),p=e-s.getSize(t).width-(n?c:o);if(p<z+y+y){let l=p-y-y;return l<0&&(l*=-1),l}}}static positionOnLeft(t,n){const e=s.getCalculatedPosition(t),o=s.checkWidth(t);return o&&o<100?s.positionOnBottom(t,n):{classes:"right",style:{left:`${e.left-n-25}px`,top:`${e.top}px`,right:"",bottom:"",width:`${n}px`}}}static positionOnLeftBottom(t,n){const e=s.getCalculatedPosition(t),o=s.checkWidth(t);return o&&o<100?s.positionOnBottom(t,n):{classes:"right position-bottom",style:{left:`${e.left-n-25}px`,top:`${e.bottom}px`,right:"",bottom:"",width:`${n}px`}}}static positionOnLeftCenter(t,n){const e=s.getCalculatedPosition(t),o=(e.bottom-e.top)/2;return{classes:"right position-center",style:{left:`${e.left-n-25}px`,top:`${e.top-o}px`,right:"",bottom:"",width:`${n}px`}}}static positionOnRight(t,n){const e=s.getCalculatedPosition(t),o=s.checkWidth(t);return o&&o<100?s.positionOnBottom(t,n):{classes:"left",style:{left:`${e.right+15}px`,top:`${e.top}px`,right:"",bottom:"",width:`${n}px`}}}static positionOnRightCenter(t,n){const e=s.getCalculatedPosition(t),p=s.getSize(t).height/2,l=(e.bottom-e.top)/2,m=e.top-p+l;return{classes:"left position-center",style:{left:`${e.right+15}px`,top:`${m}px`,right:"",bottom:"",width:`${n}px`}}}static positionOnRightBottom(t,n){const e=s.getCalculatedPosition(t),o=s.getSize(t);return{classes:"left position-bottom",style:{left:`${e.right+15}px`,top:`${e.bottom-o.height}px`,right:"",bottom:"",width:`${n}px`}}}static positionOnTop(t,n){const e=s.getCalculatedPosition(t);return{classes:"bottom",style:{top:`${e.top}px`,left:`${e.left-z-y}px`,right:"",bottom:"",width:`${n}px`}}}static positionOnTopCenter(t,n){const e=s.getCalculatedPosition(t),o=s.getSize(t),c=o.height,p=o.width/2,l=e.left+(e.right-e.left)/2;return{classes:"bottom position-center",style:{top:`${e.top-c}px`,left:`${l-p}px`,right:"",bottom:"",width:`${n}px`}}}static positionOnTopRight(t,n){const e=s.getCalculatedPosition(t),o=s.getSize(t),c=o.height;return{classes:"bottom position-right",style:{top:`${e.top-c}px`,left:`${e.right-o.width}px`,right:"",bottom:"",width:`${n}px`}}}static positionOnBottom(t,n){const e=s.getCalculatedPosition(t);return{classes:"top",style:{top:`${e.bottom}px`,left:`${e.left}px`,right:"",bottom:"",width:`${n}px`}}}static positionOnBottomCenter(t,n){const e=s.getCalculatedPosition(t),o=s.getSize(t).width/2,c=e.left+(e.right-e.left)/2;return{classes:"top position-center",style:{top:`${e.bottom}px`,left:`${c-o}px`,right:"",bottom:"",width:`${n}px`}}}static positionOnBottomRight(t,n){const e=s.getCalculatedPosition(t),o=s.getSize(t);return{classes:"top position-right",style:{top:`${e.bottom}px`,left:`${e.right-o.width}px`,right:"",bottom:"",width:`${n}px`}}}static getBlockSize(){return z}static positionOnMidCenter(t,n){const e=s.getCalculatedPosition(t),o=s.getSize(t),c=o.height,p=o.width/2,l=c/2,m=(e.bottom-e.top)/2,g=e.top-l+m,r=e.left+(e.right-e.left)/2;return{classes:"mid-center",style:{top:`${g}px`,left:`${r-p}px`,right:"",bottom:"",width:`${n}px`}}}static autoPosition(t,n){const e=s.getCalculatedPosition(t),o=s.getFullPageSize(),c=s.getSize(t),p=o.height,l=c.height;return e.bottom+l>=p?s.positionOnTop(t,n):s.positionOnBottom(t,n)}}const ft={created:(a,t)=>{t.value!==t.oldValue&&(a.dataset.onintro=t.value.text,t.value.step&&(a.dataset.step=t.value.step),t.value.position&&(a.dataset.position=t.value.position),t.value.width&&(a.dataset.width=t.value.width),t.value.hide&&(a.dataset.hide=t.value.hide))},updated:(a,t)=>{a.dataset.onintro=t.value.text,t.value.step&&(a.dataset.step=t.value.step),t.value.position&&(a.dataset.position=t.value.position),t.value.width&&(a.dataset.width=t.value.width),t.value.hide&&(a.dataset.hide=t.value.hide)}};function $(a=0,t=0,n=!1){const e=T("on-intro");if(t>=10)return e.emit("intro-close"),null;const o={};if(document.querySelectorAll("[data-onintro]").forEach(p=>{const l=parseInt(p.dataset.step??"1000",10);if(p.dataset.hide)return null;o[l]={el:p,intro:p.dataset.onintro,step:l,position:p.dataset.position??"left",width:parseInt(p.dataset.width??"500",10),steps:0,isFirst:!1,isLast:!1}}),!o[a])return $(n?--a:++a,++t,n);const c=Object.keys(o);o[a].steps=c.length,o[c[0]].step===a&&(o[a].isFirst=!0),o[c[c.length-1]].step===a&&(o[a].isLast=!0),z=o[a].width,e.emit("intro-run",o[a])}const mt={key:0,class:"on-intro"},gt=["textContent"],vt={class:"on-intro-buttons"},xt=R({name:"OnIntro",__name:"index",props:{title:{default:null}},setup(a){const t=T("on-intro"),n=u(!1),e=u(!1),o=u(!1),c=u(0),p=u(500),l=u(""),m=u(""),g=u({}),r=u(null),L=u(null),k=u(null);function W(){setTimeout(()=>{if(!L.value)return;const b=L.value.offsetTop-45;window.scrollTo({top:b,behavior:"smooth"})},400)}function N(i){l.value=i.intro,e.value=i.isFirst,o.value=i.isLast,c.value=i.step,p.value=i.width,m.value="",g.value=s.show(i.el,i.position,i.width).style,m.value=s.show(i.el,i.position,i.width).classes,g.value.width||(g.value.width=`${s.getBlockSize()}px`),r.value=i.el,i.el.classList.add("on-intro-show"),n.value=!0,W()}function w(i){i&&i.stopPropagation(),i&&i.preventDefault(),n.value=!1,r.value&&(r.value.classList.remove("on-intro-show"),r.value=null)}function q(i){i.stopPropagation(),i.preventDefault(),r.value&&(r.value.classList.remove("on-intro-show"),r.value=null),$(--c.value,0,!0)}function A(i){i.stopPropagation(),i.preventDefault(),r.value&&(r.value.classList.remove("on-intro-show"),r.value=null),$(++c.value)}return K(()=>{k.value=t.on((i,b)=>{i==="intro-run"&&N(b),i==="intro-close"&&w(b)}),window.addEventListener("resize",w)}),X(()=>{k.value&&(k.value(),k.value=null),window.removeEventListener("resize",w)}),(i,b)=>{const j=J,F=O,M=st;return d(),B(P,{to:"body"},[h(n)?(d(),v("div",mt,[x("div",{class:"on-intro-bkg",onClick:w}),x("div",{ref_key:"popup",ref:L,class:Q(["on-intro-popup",h(m)]),style:Z(h(g))},[Y(i.$slots,"default",{text:h(l)},()=>[x("div",{textContent:G(h(l))},null,8,gt)]),x("div",vt,[h(e)?_("",!0):(d(),B(F,{key:0,type:"primary",size:"sm",onClick:q},{default:C(()=>[f(j,{type:"default",height:11,revert:""})]),_:1})),h(o)?_("",!0):(d(),B(F,{key:1,type:"primary",size:"sm",onClick:A},{default:C(()=>[f(j,{type:"default",height:11})]),_:1})),f(F,{type:"primary",size:"sm",onClick:w},{default:C(()=>[f(M,{type:"black",width:20,height:20})]),_:1})])],6)])):_("",!0)])}}});let H=!1;function wt(){const a=I();return H||(a.vueApp.directive("intro",ft),H=!0),$}const bt=R({__name:"basic",setup(a){const t=wt();return(n,e)=>{const o=xt,c=O,p=tt("intro");return d(),v(et,null,[f(o),D((d(),v("div",null,[S(" example block ")])),[[p,{step:1,text:"example 1",position:"left-top",width:280}]]),D((d(),v("div",null,[S(" example block ")])),[[p,{step:4,text:"example 2",position:"right-top",width:280}]]),D((d(),v("span",null,[S(" example block ")])),[[p,{step:5,text:"example 3",position:"bottom",width:280}]]),x("div",null,[f(c,{onClick:e[0]||(e[0]=()=>h(t)(1))},{default:C(()=>[S(" RUN ")]),_:1})])],64)}}}),yt=`<script setup lang="ts">
import useIntro from "@onfl/composables/useIntro";

const $introStart = useIntro();
<\/script>

<template>
  <on-intro />
  <div
    v-intro="{
      step: 1,
      text: 'example 1',
      position: 'left-top',
      width: 280
    }"
  >
    example block
  </div>
  <div
    v-intro="{
      step: 4,
      text: 'example 2',
      position: 'right-top',
      width: 280
    }"
  >
    example block
  </div>
  <span
    v-intro="{
      step: 5,
      text: 'example 3',
      position: 'bottom',
      width: 280
    }"
  >
    example block
  </span>
  <div>
    <on-btn @click="() => $introStart(1)">
      RUN
    </on-btn>
  </div>
</template>

<style scoped lang="scss">

</style>
`,Ct={class:"markdown-body"},$t=ot(`<h1>OnIntro</h1><p>Простой компонент для вывода on-intro</p><h2>Установка</h2><h3>1. import</h3><pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> useIntro <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@onfl/composables/useIntro&quot;</span>; 
<span class="hljs-keyword">const</span> $introStart = <span class="hljs-title function_">useIntro</span>();
</code></pre><h3>2. Set directive</h3><pre><code class="hljs"><span class="hljs-attribute">v-intro</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;{step: 1,text: &#39;example 1&#39;,position: &#39;left-top&#39;,width: 280}&quot;</span>
</code></pre><h3>3. Run</h3><pre><code class="hljs"><span class="hljs-meta">@click</span>=<span class="hljs-string">&quot;() =&gt; <span class="hljs-subst">$introStart</span>(1)&quot;</span>
</code></pre><h2>Примеры использования</h2><h3>Basic</h3>`,11),kt=x("h2",null,"API",-1),Dt="OnIntro | OnFrontLib Docs",jt=[{property:"og:title",content:"OnIntro | OnFrontLib Docs"},{name:"twitter:title",content:"OnIntro | OnFrontLib Docs"}],Et={__name:"on-intro",setup(a,{expose:t}){return t({frontmatter:{title:"OnIntro | OnFrontLib Docs",meta:[{property:"og:title",content:"OnIntro | OnFrontLib Docs"},{name:"twitter:title",content:"OnIntro | OnFrontLib Docs"}]}}),nt({title:"OnIntro | OnFrontLib Docs",meta:[{property:"og:title",content:"OnIntro | OnFrontLib Docs"},{name:"twitter:title",content:"OnIntro | OnFrontLib Docs"}]}),(o,c)=>(d(),v("div",Ct,[$t,f(U,{code:h(yt)},{default:C(()=>[f(bt)]),_:1},8,["code"]),kt,f(V,{value:h(dt)},null,8,["value"])]))}};export{Et as default,jt as meta,Dt as title};
